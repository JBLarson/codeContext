<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>codeContext</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>codeContext</h1>

    <div id="authErrorContainer" style="display: none;">
      <div class="message-area error-message">
        <strong>Authentication Error:</strong> <span id="authErrorMessage"></span>
        <br><br>
        <strong>Possible solutions:</strong>
        <ul style="margin: 8px 0 0 20px; text-align: left;">
          <li>Verify your PAT has the correct permissions (repo scope for private repos)</li>
          <li>Check if your PAT has expired</li>
          <li>For organization repos, ensure the org has approved PAT access</li>
          <li>Try regenerating your token in GitHub settings</li>
          <li>If using fine-grained tokens, switch to classic tokens with full repo scope</li>
        </ul>
      </div>
    </div>

    <div class="form-group" id="patContainer">
      <label for="githubPat">GitHub Personal Access Token (optional for public repos):</label>
      <input type="password" id="githubPat" placeholder="Enter GitHub PAT for private repos…" />
    </div>

    <div class="form-group">
      <label for="repoUrl">GitHub Repository URL:</label>
      <input type="text" id="repoUrl" placeholder="https://github.com/owner/repo" value="https://github.com/jblarson/" />
    </div>

    <div class="form-group">
      <label for="branchSelect">Branch:</label>
      <select id="branchSelect" disabled>
        <option>Enter repo URL & click "Fetch Files"</option>
      </select>
      <div id="commitInfo" class="commit-info"></div>
    </div>

    <div class="button-group">
      <button id="fetchFilesBtn">Fetch Files</button>
    </div>

    <div id="statusMessages"></div>

    <div class="form-group">
      <div class="label-with-button">
        <label>Select Files/Directories:</label>
        <button id="selectAllBtn" class="select-all-btn" disabled>Select All</button>
      </div>
      <div id="fileListContainer">
        <p>Enter URL and click "Fetch Files."</p>
      </div>
    </div>

    <hr/>

    <div class="form-group">
      <label for="userInstructions">Your Instructions/Prompt:</label>
      <textarea id="userInstructions" placeholder="Type your prompt…">

RESPOND WITH COMPLETE FILES I CAN COPY AND PASTE</textarea>
    </div>

    <div class="form-group">
      <label for="outputMessage">Generated Context:</label>
      <textarea id="outputMessage"></textarea>
    </div>

    <div class="button-group">
      <button id="copyBtn">Copy to Clipboard</button>
    </div>
  </div>

  <script src="token.js"></script>
  <script src="scripts.js"></script>

</body>
</html>